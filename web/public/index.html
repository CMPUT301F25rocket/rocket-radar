<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Firebase Hosting</title>
  </head>
  <body>
    <div id="message">
      <h2>Welcome</h2>
      <h1>I'm a moron</h1>
      <p>Hope that this works</p>
    </div>
    <p id="load">Firebase SDK Loading&hellip;</p>

    <script>
      // Deep link redirect logic - runs immediately
      (function() {
        // Get the URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const eventId = urlParams.get('eventId');

        if (eventId) {
          // Construct the deep link URL using the custom radar:// scheme
          const deepLink = 'radar://radar-65b66.web.app/?eventId=' + encodeURIComponent(eventId);

          // Update the message to show we're redirecting
          const messageDiv = document.querySelector('#message h1');
          if (messageDiv) {
            messageDiv.textContent = 'Opening in Radar app...';
          }

          // Attempt to open the app
          window.location.href = deepLink;

          // Provide a fallback after a short delay in case the app didn't open
          setTimeout(function() {
            const messageDiv = document.querySelector('#message');
            if (messageDiv) {
              messageDiv.innerHTML = '<h2>Opening Radar</h2>' +
                '<h1>If the app didn\'t open automatically</h1>' +
                '<p>Make sure you have the Radar app installed on your device.</p>' +
                '<a href="' + deepLink + '">Click here to open in app</a>';
            }
          }, 2000);
        }
      })();
    </script>
  </body>
</html>
